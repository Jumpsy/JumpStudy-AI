# =================================
# JumpStudy AI Environment Variables
# =================================

# Supabase Configuration (Required for Auth)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Stripe Configuration (Required for Payments)
STRIPE_SECRET_KEY=sk_live_or_sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PLUS_PRICE_ID=price_xxx
STRIPE_TEAM_PRICE_ID=price_xxx
STRIPE_PRO_PRICE_ID=price_xxx

# Site URL
NEXT_PUBLIC_SITE_URL=https://your-domain.com

# =================================
# HOW TO SET UP SUPABASE
# =================================
# 1. Create a Supabase project at https://supabase.com
# 2. Go to Settings > API to get your keys
# 3. Enable Google OAuth in Authentication > Providers
#    - Add your Google OAuth credentials from Google Cloud Console
# 4. Run this SQL in the SQL Editor to create the profiles table:

# CREATE TABLE profiles (
#   id UUID REFERENCES auth.users PRIMARY KEY,
#   email TEXT,
#   full_name TEXT,
#   plan TEXT DEFAULT 'free',
#   stripe_customer_id TEXT,
#   stripe_subscription_id TEXT,
#   subscription_status TEXT,
#   subscription_ends_at TIMESTAMPTZ,
#   created_at TIMESTAMPTZ DEFAULT NOW(),
#   updated_at TIMESTAMPTZ DEFAULT NOW()
# );

# ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

# CREATE POLICY "Users can view own profile" ON profiles
#   FOR SELECT USING (auth.uid() = id);

# CREATE POLICY "Users can update own profile" ON profiles
#   FOR UPDATE USING (auth.uid() = id);

# CREATE POLICY "Users can insert own profile" ON profiles
#   FOR INSERT WITH CHECK (auth.uid() = id);

# -- Auto-create profile on signup
# CREATE OR REPLACE FUNCTION public.handle_new_user()
# RETURNS TRIGGER AS $$
# BEGIN
#   INSERT INTO public.profiles (id, email, full_name)
#   VALUES (NEW.id, NEW.email, NEW.raw_user_meta_data->>'full_name');
#   RETURN NEW;
# END;
# $$ LANGUAGE plpgsql SECURITY DEFINER;

# CREATE TRIGGER on_auth_user_created
#   AFTER INSERT ON auth.users
#   FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();

# =================================
# HOW TO SET UP GOOGLE AUTH
# =================================
# 1. Go to Google Cloud Console (https://console.cloud.google.com)
# 2. Create a new project or select existing
# 3. Enable Google+ API and Google Identity Services
# 4. Go to Credentials > Create Credentials > OAuth 2.0 Client ID
# 5. Add authorized redirect URIs:
#    - https://your-project.supabase.co/auth/v1/callback
# 6. Copy Client ID and Client Secret to Supabase:
#    - Authentication > Providers > Google

# =================================
# HOW TO SET UP STRIPE
# =================================
# 1. Create a Stripe account at https://stripe.com
# 2. Get your API keys from Developers > API Keys
# 3. Create Products and Prices in the Stripe Dashboard:
#    - Plus: $16/month
#    - Team: $20/month
#    - Pro: $32/month
# 4. Copy the price IDs (price_xxx) to this file
# 5. Set up webhooks:
#    - Endpoint URL: https://your-domain.com/api/stripe/webhook
#    - Events: checkout.session.completed, customer.subscription.updated,
#              customer.subscription.deleted, invoice.payment_failed
